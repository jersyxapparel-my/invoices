<!DOCTYPE html>
<html lang="ms">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Invoice - Jersyx Apparel</title>

    <link rel="icon" href="https://i.postimg.cc/BQ23Nf9X/logo-jersyx-01.png" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  </head>
  <body>
    <div id="loadingOverlay">
      <div class="spinner"></div>
      <p style="font-family: sans-serif; color: #555;">
        Invoice sedang dimuatkan...
      </p>
    </div>

    <div id="loginOverlay" class="login-overlay">
      <div class="login-card">
        <img
          src="https://i.postimg.cc/BQ23Nf9X/logo-jersyx-01.png"
          width="80"
        />
        <h2>Admin Login</h2>
        <input type="password" id="adminPass" placeholder="Masukkan Password" />
        <button
          class="btn btn-primary"
          onclick="checkLogin()"
          style="width:100%; justify-content:center; margin-top:10px;"
        >
          Login
        </button>
        <p
          id="loginMsg"
          style="color:red; font-size:12px; margin-top:10px;"
        ></p>
      </div>
    </div>

    <div id="mainApp" style="display:none;"></div>

    <div class="topbar">
      <button class="btn" id="btnGenerate">Generate Preview</button>
      <button class="btn" id="btnPrint">Print</button>
      <button class="btn btn-primary" id="btnPdf">Download PDF</button>
      <div style="flex:1"></div>
      <div class="small">Jersyx Apparel â€” Invoice Builder</div>
    </div>

    <div class="topbarCust">
      <button class="btn" id="btnPrint2">
        <i class="fa-solid fa-print"></i>Print
      </button>
      <button class="btn" id="btnPdf2">
        <i class="fa-regular fa-file-pdf"></i>Download PDF
      </button>
    </div>

    <div class="wrap">
      <div class="layout">
        <div class="col form">
          <h3>Invoice Builder</h3>

          <label>No Invoice</label>
          <input type="text" id="fInvoiceNo" placeholder="INV-0001" />

          <label>Nama Customer</label>
          <input type="text" id="fCustomer" placeholder="Nama penuh / Team" />

          <label>Alamat</label>
          <textarea id="fAddress" placeholder="Alamat pengiriman"></textarea>

          <label>No Telefon</label>
          <input type="text" id="fPhone" placeholder="012-3456789" />

          <label>Payment Status</label>
          <select id="fPaymentStatus">
            <option value="Pending">Pending</option>
            <option value="Partial">Partial</option>
            <option value="Paid">Paid</option>
          </select>

          <label>Issued By:</label>
          <input type="text" id="fIssuedBy" value="Jersyx - Rara" />

          <label>Accepted By:</label>
          <input
            type="text"
            id="fAcceptedBy"
            placeholder="Isi kalau customer request"
          />

          <hr />

          <div
            style="display:flex; justify-content:space-between; align-items:center;"
          >
            <h4 style="margin:0">Items</h4>
            <button class="btn" id="addItemBtn">+ Tambah</button>
          </div>

          <div class="items-list" id="itemsList"></div>

          <label>Deposit (RM)</label>
          <input type="number" id="fDeposit" value="0" min="0" step="0.01" />

          <label>Design Charge (RM)</label>
          <input type="number" id="fDesign" value="0" min="0" step="0.01" />

          <label>Discount (RM)</label>
          <input type="number" id="fDiscount" value="0" min="0" step="0.01" />

          <label>Total Paid (RM)</label>
          <input type="number" id="fPaid" value="0" min="0" step="0.01" />

          <div style="display:flex; gap:8px; margin-top:12px;">
            <button class="btn btn-primary" id="btnGenerate2">Generate</button>
            <button class="btn" id="btnSave">Save</button>

            <div class="dropdown-load">
              <label>Load Invoice (Cloud):</label>
              <select id="fLoadInvoiceSelect">
                <option value="">-- Menunggu Data --</option>
              </select>
              <button class="btn" id="btnLoadCloud">Load Data</button>
            </div>

            <button class="btn" id="btnClear">Reset</button>
          </div>
          <div
            id="shareSection"
            style="display:none; margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 8px; border: 1px solid #ddd;"
          >
            <h4 style="margin-top:0">Share Invoice</h4>
            <input
              type="text"
              id="shareUrl"
              readonly
              style="width:100%; padding:8px; margin-bottom:10px; border:1px solid #ccc;"
            />

            <div style="display:flex; gap:8px;">
              <button
                class="btn"
                onclick="copyLink()"
                style="flex:1; background:#333; color:white;"
              >
                <i class="fa-regular fa-copy"></i>
                Copy Link
              </button>
              <button
                class="btn"
                onclick="shareWhatsapp()"
                style="flex:1; background:#25D366; color:white;"
              >
                <i class="fa-brands fa-whatsapp"></i>
                WhatsApp
              </button>
            </div>
          </div>
        </div>

        <div class="col preview">
          <div id="invoiceRoot"></div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
